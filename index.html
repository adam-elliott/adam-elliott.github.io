<!DOCTYPE html>

<html>
<head>
    <title>GameJam</title>
    <script
        src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
    
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    
    <style>
        
        html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;font:inherit;vertical-align:baseline}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}table{border-collapse:collapse;border-spacing:0}
        button{display:inline-block;border:none;padding:.25rem 1rem;margin:0;text-decoration:none;background:#0069ed;color:#fff;font-family:sans-serif;font-size:1rem;cursor:pointer;text-align:center;transition:background 250ms ease-in-out,transform 150ms ease;-webkit-appearance:none;-moz-appearance:none}
        
        body {
            margin:0;
            padding:0;
            overflow:hidden;
        }
        
        #hud {
            position:fixed;
            top:0;
            right:0;
            left:0;
            z-index:6;
            height:50px;
            padding:15px 15px;
            box-sizing: border-box;
            font-size:20px;
            font-family:Poppins;
            background-color:rgba(255,255,255,1);
            box-shadow: 5px 5px 15px rgba(25,25,25,.3); 
        }
        
        #map {
            width:3200px;
            height:3200px;
            /*background:url(images/grid.png);*/
            position:relative;
            margin-top:50px;
        }
        
        #character {
            width:128px;
            height:128px;
            background-color:red;
            position:absolute;
            left:0;
            top:0;
        }
        
        #hud h1 {
            float:left;
        }
        
        #courageMeter {
            width: 300px;
            height:20px;
            border:1px solid grey;
            float:right
        }
        
        #courage{
         background-color:red;
         height:20px;
        }
        .cell {
            height:32px;
            width: 32px;
            float:left;
            border:1px solid blue;
            box-sizing: border-box;
        }
        
        .active {
            background-color:blue;
        }
        
        .active2 {
            background-color:green;
        }
        
        .home {
            background-color:green;
        }
        
        .wall, .item, .modifier {
            border:1px solid black;
            width:32px;
            height:32px;
            position:absolute;
            background-color:grey;
        }
        
        .item {
            background-color:green;
        }
        
        .modifier {
            background-color:yellow;
        }
        
        #viewGuide {
            margin:0 25px;
        }
        
        #mapOverlay {
            position:fixed;
            left:0;
            top:0;
            right:0;
            bottom:0;
            background-color: rgba(0,0,0,.9);
            z-index: 1000;
        }
        
        #generateColliders, #generateModifiers {
            display:none;
        }
        
        #console {
            position:fixed;
            left:0;
            right:0;
            bottom:40px;
            height: 20px;
            padding:4px 10px;
            font-size:10px;
            font-family:monospace;
            box-sizing:border-box;
            box-shadow: -5px -5px 15px rgba(25,25,25,.3);
            z-index:1000;
            background-color:#fff;
            color:green;
        }
        
        #inventory {
            position:fixed;
            left:0;
            right:0;
            bottom:0;
            height: 40px;
            padding:10px;
            font-size:10px;
            font-family:monospace;
            box-sizing:border-box;
            border-top:1px solid grey;
            z-index:1000;
            background-color:#fff;
        }
        
    </style>

</head>

<body>
<div id="mapOverlay">
    <button id="closeGuide">Close Map</button>
</div>
    
<div id="hud">
    <h1> Game Jam 2019</h1>
    <button id="viewGuide">Toggle Map</button>
    <!--<button id="mapMode">Map Build Mode</button>
    <button id="generateColliders">Export Collider Map</button>
    <button id="generateModifiers">Export Modifer Map</button>-->
    <div id="courageMeter">
        <div id="courage"></div>
    </div>
</div>

<div id="console"></div>
<div id="inventory">
    <i class="fas fa-shopping-bag"></i>
</div>

<div id="map">
    <div id="guide"></div>
    <div id="character"></div>
</div>



</body>

<script>
    function mapModeInit(){
        $('body').css('overflow','scroll');
            
        $('#generateColliders').fadeIn();
        $('#generateModifiers').fadeIn();
            
        for (let i=0; i<10000; i++) {
            let myCell = document.createElement('div');
            myCell.classList.add("cell");
            document.getElementById('map').appendChild(myCell);
        }
        
        // Controls for building map elements
        $('.cell').click(function(){$(this).toggleClass('active');})
        $('.cell').dblclick(function(){
            $(this).toggleClass('active2');
            $(this).data( "courage" , prompt("Please specify a value of this modifier. (i.e. 5 or -5)")  ); }
        )
        $( ".cell" ).contextmenu(function() {
            alert("x: "+ $(this).offset().left + " , y: " + $(this).offset().top);
          });
        
        
        let mapColliders = [];
        
        function generateCollidersMap() {
            mapColliders = [];
            
            $('.active').each(function() {
                let y = $(this).offset().top-50;
                let x = $(this).offset().left;
                let obj = {"x":x, "y":y};
                mapColliders.push(obj);
            });
            console.log(mapColliders);
        }
        
        let mapModifiers = [];
        
        function generateModifiersMap() {
            mapModifiers = [];
            
            $('.active2').each(function() {
                let y = $(this).offset().top-50;
                let x = $(this).offset().left;
                let mod = $(this).data('courage');
                console.log(mod);
                let obj = {"x":x, "y":y, "mod":mod};
                mapModifiers.push(obj);
            });
            console.log(mapModifiers);
        }
        
        $('#generateColliders').on("click",function(e) {
                e.preventDefault();
                generateCollidersMap();
        });
        
        $('#generateModifiers').on("click",function(e) {
                e.preventDefault();
                generateModifiersMap();
        });
    
    }
    
    // Character position
    let curPosX = 32;
    let curPosY = 32;
    
    // Define item inventory
    let curItems = {
        "book":
            {
            "isCollected": false,
            "isHome": false
            },
        "dog":
            {
            "isCollected": false,
            "isHome": false
            },
        "bugs":
            {
            "isCollected": false,
            "isHome": false
            },
        "cookies":
            {
            "isCollected": false,
            "isHome": false
            },
    }
    
    // Character size
    let charSize = 32;
    
    // Character move speed
    let animSpeed = 100;

    // Character move boolean
    let canMove = true;
    let canMoveX = true;
    let canMoveY = true;
    
    // Window scroll position indicators
    let currViewX = 1;
    let currViewY = 1;
    let currX = 0;
    let currY = 0;
    
    let scrollAdv = window.innerwidth/2;
    
    // Initial courage
    let curCourage = 100;
    
    // Courage interval
    let curInterval = 0;
    
    // Speed at which courage drops
    let dropSpeed = -2;
    
    // Speed at which courage rises;
    let riseSpeed = 10;    
    
    // Build a wall
    let myWall = document.createElement("div");
    myWall.classList.add('wall');
    
    // Define cells that are off limits
    let colliderCells=[{"x":0,"y":0},{"x":32,"y":0},{"x":64,"y":0},{"x":96,"y":0},{"x":128,"y":0},{"x":160,"y":0},{"x":192,"y":0},{"x":224,"y":0},{"x":256,"y":0},{"x":288,"y":0},{"x":320,"y":0},{"x":352,"y":0},{"x":384,"y":0},{"x":416,"y":0},{"x":448,"y":0},{"x":480,"y":0},{"x":512,"y":0},{"x":544,"y":0},{"x":576,"y":0},{"x":608,"y":0},{"x":640,"y":0},{"x":672,"y":0},{"x":704,"y":0},{"x":736,"y":0},{"x":768,"y":0},{"x":800,"y":0},{"x":832,"y":0},{"x":864,"y":0},{"x":896,"y":0},{"x":928,"y":0},{"x":960,"y":0},{"x":992,"y":0},{"x":1024,"y":0},{"x":1056,"y":0},{"x":1088,"y":0},{"x":1120,"y":0},{"x":1152,"y":0},{"x":1184,"y":0},{"x":1216,"y":0},{"x":1248,"y":0},{"x":1280,"y":0},{"x":1312,"y":0},{"x":1344,"y":0},{"x":1376,"y":0},{"x":1408,"y":0},{"x":1440,"y":0},{"x":1472,"y":0},{"x":1504,"y":0},{"x":1536,"y":0},{"x":1568,"y":0},{"x":1600,"y":0},{"x":1632,"y":0},{"x":1664,"y":0},{"x":1696,"y":0},{"x":1728,"y":0},{"x":1760,"y":0},{"x":1792,"y":0},{"x":1824,"y":0},{"x":1856,"y":0},{"x":1888,"y":0},{"x":1920,"y":0},{"x":1952,"y":0},{"x":1984,"y":0},{"x":2016,"y":0},{"x":2048,"y":0},{"x":2080,"y":0},{"x":2112,"y":0},{"x":2144,"y":0},{"x":2176,"y":0},{"x":2208,"y":0},{"x":2240,"y":0},{"x":2272,"y":0},{"x":2304,"y":0},{"x":2336,"y":0},{"x":2368,"y":0},{"x":2400,"y":0},{"x":2432,"y":0},{"x":2464,"y":0},{"x":2496,"y":0},{"x":2528,"y":0},{"x":2560,"y":0},{"x":2592,"y":0},{"x":2624,"y":0},{"x":2656,"y":0},{"x":2688,"y":0},{"x":2720,"y":0},{"x":2752,"y":0},{"x":2784,"y":0},{"x":2816,"y":0},{"x":2848,"y":0},{"x":2880,"y":0},{"x":2912,"y":0},{"x":2944,"y":0},{"x":2976,"y":0},{"x":3008,"y":0},{"x":3040,"y":0},{"x":3072,"y":0},{"x":3104,"y":0},{"x":3136,"y":0},{"x":3168,"y":0},{"x":0,"y":32},{"x":448,"y":32},{"x":864,"y":32},{"x":896,"y":32},{"x":928,"y":32},{"x":960,"y":32},{"x":992,"y":32},{"x":1024,"y":32},{"x":1056,"y":32},{"x":1120,"y":32},{"x":1792,"y":32},{"x":3168,"y":32},{"x":0,"y":64},{"x":448,"y":64},{"x":544,"y":64},{"x":864,"y":64},{"x":896,"y":64},{"x":928,"y":64},{"x":960,"y":64},{"x":992,"y":64},{"x":1024,"y":64},{"x":1056,"y":64},{"x":1120,"y":64},{"x":1792,"y":64},{"x":3168,"y":64},{"x":0,"y":96},{"x":448,"y":96},{"x":864,"y":96},{"x":896,"y":96},{"x":928,"y":96},{"x":960,"y":96},{"x":992,"y":96},{"x":1024,"y":96},{"x":1056,"y":96},{"x":1120,"y":96},{"x":1792,"y":96},{"x":3168,"y":96},{"x":0,"y":128},{"x":448,"y":128},{"x":928,"y":128},{"x":992,"y":128},{"x":1120,"y":128},{"x":1792,"y":128},{"x":3168,"y":128},{"x":0,"y":160},{"x":448,"y":160},{"x":1120,"y":160},{"x":1792,"y":160},{"x":3168,"y":160},{"x":0,"y":192},{"x":448,"y":192},{"x":1120,"y":192},{"x":1792,"y":192},{"x":3168,"y":192},{"x":0,"y":224},{"x":32,"y":224},{"x":64,"y":224},{"x":96,"y":224},{"x":128,"y":224},{"x":160,"y":224},{"x":192,"y":224},{"x":224,"y":224},{"x":448,"y":224},{"x":1120,"y":224},{"x":1344,"y":224},{"x":1376,"y":224},{"x":1408,"y":224},{"x":1440,"y":224},{"x":1472,"y":224},{"x":1504,"y":224},{"x":1536,"y":224},{"x":1792,"y":224},{"x":3168,"y":224},{"x":0,"y":256},{"x":224,"y":256},{"x":448,"y":256},{"x":1120,"y":256},{"x":1344,"y":256},{"x":1536,"y":256},{"x":1792,"y":256},{"x":3168,"y":256},{"x":0,"y":288},{"x":224,"y":288},{"x":448,"y":288},{"x":1120,"y":288},{"x":1344,"y":288},{"x":1536,"y":288},{"x":1792,"y":288},{"x":3168,"y":288},{"x":0,"y":320},{"x":224,"y":320},{"x":448,"y":320},{"x":1120,"y":320},{"x":1216,"y":320},{"x":1344,"y":320},{"x":1536,"y":320},{"x":1792,"y":320},{"x":3168,"y":320},{"x":0,"y":352},{"x":224,"y":352},{"x":448,"y":352},{"x":1120,"y":352},{"x":1344,"y":352},{"x":1536,"y":352},{"x":1632,"y":352},{"x":1664,"y":352},{"x":1696,"y":352},{"x":1728,"y":352},{"x":1760,"y":352},{"x":1792,"y":352},{"x":3168,"y":352},{"x":0,"y":384},{"x":224,"y":384},{"x":448,"y":384},{"x":1120,"y":384},{"x":1344,"y":384},{"x":1792,"y":384},{"x":3168,"y":384},{"x":0,"y":416},{"x":224,"y":416},{"x":448,"y":416},{"x":1120,"y":416},{"x":1344,"y":416},{"x":1792,"y":416},{"x":3168,"y":416},{"x":0,"y":448},{"x":32,"y":448},{"x":160,"y":448},{"x":192,"y":448},{"x":224,"y":448},{"x":352,"y":448},{"x":384,"y":448},{"x":416,"y":448},{"x":448,"y":448},{"x":480,"y":448},{"x":512,"y":448},{"x":544,"y":448},{"x":576,"y":448},{"x":608,"y":448},{"x":640,"y":448},{"x":672,"y":448},{"x":704,"y":448},{"x":736,"y":448},{"x":768,"y":448},{"x":800,"y":448},{"x":832,"y":448},{"x":864,"y":448},{"x":896,"y":448},{"x":928,"y":448},{"x":960,"y":448},{"x":1088,"y":448},{"x":1120,"y":448},{"x":1152,"y":448},{"x":1184,"y":448},{"x":1216,"y":448},{"x":1248,"y":448},{"x":1280,"y":448},{"x":1312,"y":448},{"x":1344,"y":448},{"x":1792,"y":448},{"x":3168,"y":448},{"x":0,"y":480},{"x":224,"y":480},{"x":512,"y":480},{"x":640,"y":480},{"x":1792,"y":480},{"x":3168,"y":480},{"x":0,"y":512},{"x":224,"y":512},{"x":512,"y":512},{"x":640,"y":512},{"x":1792,"y":512},{"x":3168,"y":512},{"x":0,"y":544},{"x":224,"y":544},{"x":640,"y":544},{"x":1440,"y":544},{"x":1472,"y":544},{"x":1504,"y":544},{"x":1536,"y":544},{"x":1568,"y":544},{"x":1600,"y":544},{"x":1632,"y":544},{"x":1664,"y":544},{"x":1696,"y":544},{"x":1728,"y":544},{"x":1760,"y":544},{"x":1792,"y":544},{"x":1824,"y":544},{"x":1856,"y":544},{"x":1888,"y":544},{"x":1920,"y":544},{"x":1952,"y":544},{"x":1984,"y":544},{"x":2016,"y":544},{"x":2048,"y":544},{"x":2080,"y":544},{"x":2112,"y":544},{"x":2144,"y":544},{"x":2176,"y":544},{"x":2208,"y":544},{"x":2240,"y":544},{"x":2272,"y":544},{"x":2304,"y":544},{"x":2336,"y":544},{"x":2368,"y":544},{"x":2400,"y":544},{"x":2432,"y":544},{"x":2464,"y":544},{"x":2496,"y":544},{"x":2528,"y":544},{"x":2560,"y":544},{"x":2592,"y":544},{"x":2624,"y":544},{"x":2656,"y":544},{"x":2688,"y":544},{"x":2720,"y":544},{"x":2752,"y":544},{"x":2784,"y":544},{"x":2816,"y":544},{"x":2848,"y":544},{"x":2880,"y":544},{"x":2912,"y":544},{"x":3168,"y":544},{"x":0,"y":576},{"x":224,"y":576},{"x":640,"y":576},{"x":1440,"y":576},{"x":1792,"y":576},{"x":1984,"y":576},{"x":2400,"y":576},{"x":2912,"y":576},{"x":3168,"y":576},{"x":0,"y":608},{"x":224,"y":608},{"x":640,"y":608},{"x":1440,"y":608},{"x":1792,"y":608},{"x":1984,"y":608},{"x":2400,"y":608},{"x":2912,"y":608},{"x":3168,"y":608},{"x":0,"y":640},{"x":224,"y":640},{"x":512,"y":640},{"x":640,"y":640},{"x":1440,"y":640},{"x":1792,"y":640},{"x":1984,"y":640},{"x":2400,"y":640},{"x":2912,"y":640},{"x":3168,"y":640},{"x":0,"y":672},{"x":224,"y":672},{"x":256,"y":672},{"x":288,"y":672},{"x":320,"y":672},{"x":352,"y":672},{"x":384,"y":672},{"x":512,"y":672},{"x":640,"y":672},{"x":1440,"y":672},{"x":1792,"y":672},{"x":1984,"y":672},{"x":2400,"y":672},{"x":2912,"y":672},{"x":3168,"y":672},{"x":0,"y":704},{"x":512,"y":704},{"x":640,"y":704},{"x":1440,"y":704},{"x":1792,"y":704},{"x":1984,"y":704},{"x":2400,"y":704},{"x":2912,"y":704},{"x":3168,"y":704},{"x":0,"y":736},{"x":512,"y":736},{"x":640,"y":736},{"x":1440,"y":736},{"x":1792,"y":736},{"x":1984,"y":736},{"x":2400,"y":736},{"x":2592,"y":736},{"x":2624,"y":736},{"x":2656,"y":736},{"x":2688,"y":736},{"x":2720,"y":736},{"x":2752,"y":736},{"x":2912,"y":736},{"x":3168,"y":736},{"x":0,"y":768},{"x":512,"y":768},{"x":640,"y":768},{"x":1440,"y":768},{"x":1792,"y":768},{"x":1984,"y":768},{"x":2400,"y":768},{"x":2592,"y":768},{"x":2752,"y":768},{"x":2912,"y":768},{"x":3168,"y":768},{"x":0,"y":800},{"x":512,"y":800},{"x":640,"y":800},{"x":1440,"y":800},{"x":1792,"y":800},{"x":1984,"y":800},{"x":2400,"y":800},{"x":2592,"y":800},{"x":2752,"y":800},{"x":2912,"y":800},{"x":3168,"y":800},{"x":0,"y":832},{"x":512,"y":832},{"x":640,"y":832},{"x":1440,"y":832},{"x":1792,"y":832},{"x":1984,"y":832},{"x":2400,"y":832},{"x":2592,"y":832},{"x":2656,"y":832},{"x":2752,"y":832},{"x":2912,"y":832},{"x":3168,"y":832},{"x":0,"y":864},{"x":32,"y":864},{"x":64,"y":864},{"x":192,"y":864},{"x":224,"y":864},{"x":256,"y":864},{"x":288,"y":864},{"x":320,"y":864},{"x":352,"y":864},{"x":384,"y":864},{"x":416,"y":864},{"x":448,"y":864},{"x":480,"y":864},{"x":512,"y":864},{"x":640,"y":864},{"x":672,"y":864},{"x":704,"y":864},{"x":736,"y":864},{"x":768,"y":864},{"x":896,"y":864},{"x":928,"y":864},{"x":960,"y":864},{"x":992,"y":864},{"x":1024,"y":864},{"x":1056,"y":864},{"x":1088,"y":864},{"x":1120,"y":864},{"x":1152,"y":864},{"x":1184,"y":864},{"x":1216,"y":864},{"x":1248,"y":864},{"x":1280,"y":864},{"x":1312,"y":864},{"x":1344,"y":864},{"x":1376,"y":864},{"x":1408,"y":864},{"x":1440,"y":864},{"x":1792,"y":864},{"x":1984,"y":864},{"x":2400,"y":864},{"x":2592,"y":864},{"x":2752,"y":864},{"x":2912,"y":864},{"x":3168,"y":864},{"x":0,"y":896},{"x":512,"y":896},{"x":1152,"y":896},{"x":1792,"y":896},{"x":1984,"y":896},{"x":2400,"y":896},{"x":2592,"y":896},{"x":2912,"y":896},{"x":3168,"y":896},{"x":0,"y":928},{"x":512,"y":928},{"x":1152,"y":928},{"x":1792,"y":928},{"x":1984,"y":928},{"x":2400,"y":928},{"x":2592,"y":928},{"x":2912,"y":928},{"x":3168,"y":928},{"x":0,"y":960},{"x":512,"y":960},{"x":1152,"y":960},{"x":1792,"y":960},{"x":1984,"y":960},{"x":2400,"y":960},{"x":2592,"y":960},{"x":2912,"y":960},{"x":3168,"y":960},{"x":0,"y":992},{"x":512,"y":992},{"x":1152,"y":992},{"x":1792,"y":992},{"x":1984,"y":992},{"x":2400,"y":992},{"x":2592,"y":992},{"x":2912,"y":992},{"x":3168,"y":992},{"x":0,"y":1024},{"x":512,"y":1024},{"x":1152,"y":1024},{"x":1792,"y":1024},{"x":1984,"y":1024},{"x":2400,"y":1024},{"x":2592,"y":1024},{"x":2624,"y":1024},{"x":2656,"y":1024},{"x":2688,"y":1024},{"x":2720,"y":1024},{"x":2752,"y":1024},{"x":2784,"y":1024},{"x":2816,"y":1024},{"x":2848,"y":1024},{"x":2880,"y":1024},{"x":2912,"y":1024},{"x":3168,"y":1024},{"x":0,"y":1056},{"x":512,"y":1056},{"x":1152,"y":1056},{"x":1792,"y":1056},{"x":1984,"y":1056},{"x":3168,"y":1056},{"x":0,"y":1088},{"x":512,"y":1088},{"x":1152,"y":1088},{"x":1792,"y":1088},{"x":1984,"y":1088},{"x":3168,"y":1088},{"x":0,"y":1120},{"x":512,"y":1120},{"x":1152,"y":1120},{"x":1792,"y":1120},{"x":1984,"y":1120},{"x":3168,"y":1120},{"x":0,"y":1152},{"x":512,"y":1152},{"x":1152,"y":1152},{"x":1792,"y":1152},{"x":1984,"y":1152},{"x":3168,"y":1152},{"x":0,"y":1184},{"x":512,"y":1184},{"x":1152,"y":1184},{"x":1792,"y":1184},{"x":1984,"y":1184},{"x":3168,"y":1184},{"x":0,"y":1216},{"x":512,"y":1216},{"x":1152,"y":1216},{"x":1792,"y":1216},{"x":1984,"y":1216},{"x":2144,"y":1216},{"x":2176,"y":1216},{"x":2208,"y":1216},{"x":2240,"y":1216},{"x":2272,"y":1216},{"x":2304,"y":1216},{"x":2336,"y":1216},{"x":2368,"y":1216},{"x":2400,"y":1216},{"x":2432,"y":1216},{"x":2464,"y":1216},{"x":2496,"y":1216},{"x":2528,"y":1216},{"x":2560,"y":1216},{"x":2592,"y":1216},{"x":2624,"y":1216},{"x":2656,"y":1216},{"x":2688,"y":1216},{"x":2720,"y":1216},{"x":2752,"y":1216},{"x":2784,"y":1216},{"x":2816,"y":1216},{"x":2848,"y":1216},{"x":2880,"y":1216},{"x":2912,"y":1216},{"x":2944,"y":1216},{"x":2976,"y":1216},{"x":3008,"y":1216},{"x":3040,"y":1216},{"x":3072,"y":1216},{"x":3104,"y":1216},{"x":3136,"y":1216},{"x":3168,"y":1216},{"x":0,"y":1248},{"x":512,"y":1248},{"x":1152,"y":1248},{"x":1792,"y":1248},{"x":1984,"y":1248},{"x":2144,"y":1248},{"x":3168,"y":1248},{"x":0,"y":1280},{"x":32,"y":1280},{"x":64,"y":1280},{"x":96,"y":1280},{"x":128,"y":1280},{"x":160,"y":1280},{"x":192,"y":1280},{"x":224,"y":1280},{"x":256,"y":1280},{"x":288,"y":1280},{"x":320,"y":1280},{"x":352,"y":1280},{"x":384,"y":1280},{"x":416,"y":1280},{"x":448,"y":1280},{"x":480,"y":1280},{"x":512,"y":1280},{"x":544,"y":1280},{"x":576,"y":1280},{"x":608,"y":1280},{"x":640,"y":1280},{"x":672,"y":1280},{"x":704,"y":1280},{"x":736,"y":1280},{"x":768,"y":1280},{"x":800,"y":1280},{"x":832,"y":1280},{"x":864,"y":1280},{"x":896,"y":1280},{"x":928,"y":1280},{"x":960,"y":1280},{"x":992,"y":1280},{"x":1024,"y":1280},{"x":1056,"y":1280},{"x":1088,"y":1280},{"x":1120,"y":1280},{"x":1152,"y":1280},{"x":1184,"y":1280},{"x":1216,"y":1280},{"x":1248,"y":1280},{"x":1280,"y":1280},{"x":1312,"y":1280},{"x":1344,"y":1280},{"x":1376,"y":1280},{"x":1408,"y":1280},{"x":1440,"y":1280},{"x":1472,"y":1280},{"x":1504,"y":1280},{"x":1536,"y":1280},{"x":1568,"y":1280},{"x":1600,"y":1280},{"x":1632,"y":1280},{"x":1664,"y":1280},{"x":1696,"y":1280},{"x":1728,"y":1280},{"x":1760,"y":1280},{"x":1792,"y":1280},{"x":1984,"y":1280},{"x":2144,"y":1280},{"x":3168,"y":1280},{"x":0,"y":1312},{"x":1056,"y":1312},{"x":1984,"y":1312},{"x":2144,"y":1312},{"x":3168,"y":1312},{"x":0,"y":1344},{"x":1056,"y":1344},{"x":1984,"y":1344},{"x":3168,"y":1344},{"x":0,"y":1376},{"x":1056,"y":1376},{"x":1984,"y":1376},{"x":3168,"y":1376},{"x":0,"y":1408},{"x":1056,"y":1408},{"x":1984,"y":1408},{"x":3168,"y":1408},{"x":0,"y":1440},{"x":1056,"y":1440},{"x":1984,"y":1440},{"x":3168,"y":1440},{"x":0,"y":1472},{"x":1056,"y":1472},{"x":1984,"y":1472},{"x":3168,"y":1472},{"x":0,"y":1504},{"x":1056,"y":1504},{"x":1984,"y":1504},{"x":3168,"y":1504},{"x":0,"y":1536},{"x":1056,"y":1536},{"x":1984,"y":1536},{"x":3168,"y":1536},{"x":0,"y":1568},{"x":1056,"y":1568},{"x":1984,"y":1568},{"x":3168,"y":1568},{"x":0,"y":1600},{"x":1056,"y":1600},{"x":1984,"y":1600},{"x":3168,"y":1600},{"x":0,"y":1632},{"x":1056,"y":1632},{"x":1984,"y":1632},{"x":3168,"y":1632},{"x":0,"y":1664},{"x":1056,"y":1664},{"x":1984,"y":1664},{"x":3168,"y":1664},{"x":0,"y":1696},{"x":1056,"y":1696},{"x":1984,"y":1696},{"x":3168,"y":1696},{"x":0,"y":1728},{"x":32,"y":1728},{"x":64,"y":1728},{"x":96,"y":1728},{"x":128,"y":1728},{"x":160,"y":1728},{"x":192,"y":1728},{"x":1056,"y":1728},{"x":1984,"y":1728},{"x":3168,"y":1728},{"x":0,"y":1760},{"x":1056,"y":1760},{"x":1984,"y":1760},{"x":3168,"y":1760},{"x":0,"y":1792},{"x":1056,"y":1792},{"x":1984,"y":1792},{"x":3168,"y":1792},{"x":0,"y":1824},{"x":1056,"y":1824},{"x":1984,"y":1824},{"x":3168,"y":1824},{"x":0,"y":1856},{"x":1056,"y":1856},{"x":3168,"y":1856},{"x":0,"y":1888},{"x":1056,"y":1888},{"x":3168,"y":1888},{"x":0,"y":1920},{"x":1056,"y":1920},{"x":3168,"y":1920},{"x":0,"y":1952},{"x":1984,"y":1952},{"x":3168,"y":1952},{"x":0,"y":1984},{"x":1984,"y":1984},{"x":3168,"y":1984},{"x":0,"y":2016},{"x":1984,"y":2016},{"x":3168,"y":2016},{"x":0,"y":2048},{"x":1056,"y":2048},{"x":1984,"y":2048},{"x":3168,"y":2048},{"x":0,"y":2080},{"x":1056,"y":2080},{"x":1984,"y":2080},{"x":3168,"y":2080},{"x":0,"y":2112},{"x":1056,"y":2112},{"x":1088,"y":2112},{"x":1120,"y":2112},{"x":1152,"y":2112},{"x":1184,"y":2112},{"x":1216,"y":2112},{"x":1248,"y":2112},{"x":1280,"y":2112},{"x":1312,"y":2112},{"x":1440,"y":2112},{"x":1472,"y":2112},{"x":1504,"y":2112},{"x":1536,"y":2112},{"x":1568,"y":2112},{"x":1600,"y":2112},{"x":1632,"y":2112},{"x":1664,"y":2112},{"x":1696,"y":2112},{"x":1728,"y":2112},{"x":1760,"y":2112},{"x":1792,"y":2112},{"x":1824,"y":2112},{"x":1856,"y":2112},{"x":1888,"y":2112},{"x":1920,"y":2112},{"x":1952,"y":2112},{"x":1984,"y":2112},{"x":2016,"y":2112},{"x":2048,"y":2112},{"x":2080,"y":2112},{"x":2112,"y":2112},{"x":2144,"y":2112},{"x":2176,"y":2112},{"x":2208,"y":2112},{"x":2240,"y":2112},{"x":2272,"y":2112},{"x":2304,"y":2112},{"x":2336,"y":2112},{"x":2368,"y":2112},{"x":2400,"y":2112},{"x":2432,"y":2112},{"x":2464,"y":2112},{"x":2496,"y":2112},{"x":2528,"y":2112},{"x":2560,"y":2112},{"x":2592,"y":2112},{"x":2752,"y":2112},{"x":2784,"y":2112},{"x":2816,"y":2112},{"x":2848,"y":2112},{"x":2880,"y":2112},{"x":2912,"y":2112},{"x":2944,"y":2112},{"x":2976,"y":2112},{"x":3008,"y":2112},{"x":3040,"y":2112},{"x":3072,"y":2112},{"x":3104,"y":2112},{"x":3136,"y":2112},{"x":3168,"y":2112},{"x":0,"y":2144},{"x":1056,"y":2144},{"x":3168,"y":2144},{"x":0,"y":2176},{"x":1056,"y":2176},{"x":3168,"y":2176},{"x":0,"y":2208},{"x":1056,"y":2208},{"x":3168,"y":2208},{"x":0,"y":2240},{"x":1056,"y":2240},{"x":3168,"y":2240},{"x":0,"y":2272},{"x":1056,"y":2272},{"x":3168,"y":2272},{"x":0,"y":2304},{"x":1056,"y":2304},{"x":3168,"y":2304},{"x":0,"y":2336},{"x":1056,"y":2336},{"x":3168,"y":2336},{"x":0,"y":2368},{"x":1088,"y":2368},{"x":3168,"y":2368},{"x":0,"y":2400},{"x":1056,"y":2400},{"x":3168,"y":2400},{"x":0,"y":2432},{"x":3168,"y":2432},{"x":0,"y":2464},{"x":3168,"y":2464},{"x":0,"y":2496},{"x":3168,"y":2496},{"x":0,"y":2528},{"x":3168,"y":2528},{"x":0,"y":2560},{"x":3168,"y":2560},{"x":0,"y":2592},{"x":3168,"y":2592},{"x":0,"y":2624},{"x":3168,"y":2624},{"x":0,"y":2656},{"x":3168,"y":2656},{"x":0,"y":2688},{"x":3168,"y":2688},{"x":0,"y":2720},{"x":3168,"y":2720},{"x":0,"y":2752},{"x":3168,"y":2752},{"x":0,"y":2784},{"x":3168,"y":2784},{"x":0,"y":2816},{"x":3168,"y":2816},{"x":0,"y":2848},{"x":3168,"y":2848},{"x":0,"y":2880},{"x":3168,"y":2880},{"x":0,"y":2912},{"x":3168,"y":2912},{"x":0,"y":2944},{"x":3168,"y":2944},{"x":0,"y":2976},{"x":3168,"y":2976},{"x":0,"y":3008},{"x":3168,"y":3008},{"x":0,"y":3040},{"x":3168,"y":3040},{"x":0,"y":3072},{"x":3168,"y":3072},{"x":0,"y":3104},{"x":3168,"y":3104},{"x":0,"y":3136},{"x":3168,"y":3136},{"x":0,"y":3168},{"x":32,"y":3168},{"x":64,"y":3168},{"x":96,"y":3168},{"x":128,"y":3168},{"x":160,"y":3168},{"x":192,"y":3168},{"x":224,"y":3168},{"x":256,"y":3168},{"x":288,"y":3168},{"x":320,"y":3168},{"x":352,"y":3168},{"x":384,"y":3168},{"x":416,"y":3168},{"x":448,"y":3168},{"x":480,"y":3168},{"x":512,"y":3168},{"x":544,"y":3168},{"x":576,"y":3168},{"x":608,"y":3168},{"x":640,"y":3168},{"x":672,"y":3168},{"x":704,"y":3168},{"x":736,"y":3168},{"x":768,"y":3168},{"x":800,"y":3168},{"x":832,"y":3168},{"x":864,"y":3168},{"x":896,"y":3168},{"x":928,"y":3168},{"x":960,"y":3168},{"x":992,"y":3168},{"x":1024,"y":3168},{"x":1056,"y":3168},{"x":1088,"y":3168},{"x":1120,"y":3168},{"x":1152,"y":3168},{"x":1184,"y":3168},{"x":1216,"y":3168},{"x":1248,"y":3168},{"x":1280,"y":3168},{"x":1312,"y":3168},{"x":1344,"y":3168},{"x":1376,"y":3168},{"x":1408,"y":3168},{"x":1440,"y":3168},{"x":1472,"y":3168},{"x":1504,"y":3168},{"x":1536,"y":3168},{"x":1568,"y":3168},{"x":1600,"y":3168},{"x":1632,"y":3168},{"x":1664,"y":3168},{"x":1696,"y":3168},{"x":1728,"y":3168},{"x":1760,"y":3168},{"x":1792,"y":3168},{"x":1824,"y":3168},{"x":1856,"y":3168},{"x":1888,"y":3168},{"x":1920,"y":3168},{"x":1952,"y":3168},{"x":1984,"y":3168},{"x":2016,"y":3168},{"x":2048,"y":3168},{"x":2080,"y":3168},{"x":2112,"y":3168},{"x":2144,"y":3168},{"x":2176,"y":3168},{"x":2208,"y":3168},{"x":2240,"y":3168},{"x":2272,"y":3168},{"x":2304,"y":3168},{"x":2336,"y":3168},{"x":2368,"y":3168},{"x":2400,"y":3168},{"x":2432,"y":3168},{"x":2464,"y":3168},{"x":2496,"y":3168},{"x":2528,"y":3168},{"x":2560,"y":3168},{"x":2592,"y":3168},{"x":2624,"y":3168},{"x":2656,"y":3168},{"x":2688,"y":3168},{"x":2720,"y":3168},{"x":2752,"y":3168},{"x":2784,"y":3168},{"x":2816,"y":3168},{"x":2848,"y":3168},{"x":2880,"y":3168},{"x":2912,"y":3168},{"x":2944,"y":3168},{"x":2976,"y":3168},{"x":3008,"y":3168},{"x":3040,"y":3168},{"x":3072,"y":3168},{"x":3104,"y":3168},{"x":3136,"y":3168},{"x":3168,"y":3168}];
    let modifierCells = [{"x":1536,"y":448,"mod":"5"},{"x":1024,"y":544,"mod":"5"},{"x":768,"y":672,"mod":"5"},{"x":1600,"y":704,"mod":"5"},{"x":1728,"y":896,"mod":"5"},{"x":224,"y":960,"mod":"5"},{"x":992,"y":1024,"mod":"5"}];
    let itemCells = [{"x":576,"y":128,"item":"school", "isFound":false, "img":"images/school.png"},{"x":608,"y":128,"item":"school", "isFound":false},{"x":1216,"y":192,"item":"backpack", "isFound":false},{"x":96,"y":288,"item":"dog", "isFound":false},{"x":1280,"y":736,"item":"homework", "isFound":false},{"x":1344,"y":1120,"item":"store", "isFound":false},{"x":384,"y":1152,"item":"milk", "isFound":false}];
    
    // Update map with items not yet found
    function loadItems() {
        $('.item').remove();
        for (let i=0; i<itemCells.length; i++){
            if (itemCells[i].isFound != true) {
                let myCell = document.createElement('div');
                myCell.classList.add('item');
                myCell.style.left = itemCells[i].x + "px";
                myCell.style.top = itemCells[i].y + "px";
                //myCell.style.border = "1px solid red";
                $('#guide').append(myCell);
                guideHidden = false;
            }
        }
    }
    
        
    // Character move controls
    $(document).ready(function() {
        //Resize window
        //window.resizeTo(288, 224);
        
        // Reset window scroll position
        setTimeout(function(){
            $(window).scrollLeft(0);
            $(window).scrollTop(0);
        },50)
        
        // Build Mode controls
        $('#mapMode').on("click",function(e) {
            e.preventDefault();
            mapModeInit();
        });
        
        // Setup map controls
        $('#mapOverlay').hide();    
        
        // Map hidden variable
        let guideHidden = true;
        
        $('#viewGuide').on("click",function(e) {
            e.preventDefault();
            //$('#mapOverlay').fadeIn();
            
            if (guideHidden == true) {
                
                $('#guide').html("");
                for (let i=0; i<colliderCells.length; i++){
                    let myCell = document.createElement('div');
                    myCell.classList.add('wall');
                    myCell.style.left = colliderCells[i].x + "px";
                    myCell.style.top = colliderCells[i].y + "px";
                    //myCell.style.border = "1px solid red";
                    $('#guide').append(myCell);
                }
                
                for (let i=0; i<modifierCells.length; i++){            
                    let myCell = document.createElement('div');
                    myCell.classList.add('modifier');
                    myCell.style.left = modifierCells[i].x + "px";
                    myCell.style.top = modifierCells[i].y + "px";
                    //myCell.style.border = "1px solid red";
                    $('#guide').append(myCell);
                }
         
                loadItems();
            }
        });
        
        $('#closeGuide').on("click",function(e) {
            e.preventDefault();
            $('#mapOverlay').fadeOut();    
        });
    
        
        // Set character size
        $('#character').css("width",charSize + "px");
        $('#character').css("height",charSize + "px");
        
        // Set character position
        $('#character').css("top",curPosY + "px");
        $('#character').css("left",curPosX + "px");
        
        
        // Set courage 
        $('#courage').css('width', curCourage +"%");
        
        
        // Start courage level timer
        setInterval(function() {
            curCourage += curInterval;
            if (curCourage > 100) {
                curCourage = 100;
            }
            $('#courage').animate({
                    "width": curCourage + "%"
                }, 500); }, 1000);

                
        // increase courage when home
        function checkHome() {
            if ( curPosX == 32 && curPosY == 32 ) {
                // Controls drop speed
                curInterval = riseSpeed;
                
                // Allow player to access map
                $("#viewGuide").fadeIn();
            } else {
                // Controls rise speed
                curInterval = dropSpeed;
                
                // Disallow player to access map
                $("#viewGuide").fadeOut();
            }
            
            for (key in curItems) {
                if ( curItems.hasOwnProperty(key) ) {
                    if (curItems[key].isCollected == true){
                        console.log(curItems[key]);
                            if ( curPosX == 32 && curPosY == 32 ) {
                                curItems[key].isHome = true;
                            }
                    }
                    if (curItems[key].isHome == true) {
                        console.log("you brought it home!");
                        $('#console').html('You brought home a ' + key +"! Your courage will now last longer!");
                        console.log(curItems[key]);
                    }
                }
            }
            
            //
            //for (let i=0; curItems.length; i++){
            //    if (curItems[i].isCollected == true){
            //        console.log(cureItems[i]);
            //        cureItems[i].isHome = true;
            //    }
            //    if (curItems[i].isHome == true) {
            //        console.log("you brought it home!");
            //    }
            //}
        }
                
    	$(document).on( "keydown", function(e) {

            // Optional Setting : Courage decreases with moves
            //curCourage -= 1;
            //$('#courage').css('width',curCourage +"%")
                
            // Loser message    
            if (curCourage <= -1) {
                alert("Game over! You lost.");
                $(document).off();
            }
            
            
            
            // Test if character can move to destination cell
            function checkMove(n) {
                let newPosX = 0;
                let newPosY = 0;
                
                if (n == "+x") {
                    newPosX = curPosX + charSize;
                } else if (n == "-x") {
                    newPosX = curPosX - charSize;
                } else {
                    newPosX = curPosX;
                }
                if (n == "+y") {
                    newPosY = curPosY + charSize;
                } else if (n == "-y") {
                    newPosY = curPosY - charSize;
                } else {
                    newPosY = curPosY;
                }
                
                console.log(newPosX);
                console.log(newPosY);
                
                for (let i=0; i<itemCells.length; i++) {
                    // Test coordinates
                    if (itemCells[i].x == newPosX && itemCells[i].y == newPosY) {
                        if ( itemCells[i].isFound != true ) {
                            console.log("you found an item!");
                            $('#console').html('You collected a ' + itemCells[i].item +"! Return home for a courage boost.");
                            let myItem = itemCells[i].item;
                            console.log(myItem);
                            curItems[myItem].isCollected = true;
                            itemCells[i].isFound = true;
                            loadItems();
                            // add item to bag
                            let invItem = document.createElement;
                            invItem.src = itemCells[i].img;
                            document.getElementById('inventory').appendChild(invItem);
                        }
                    }
                }
                
                var isTrue = true;
                for (let i=0; i<colliderCells.length; i++) {
                    // Test coordinates
                    if (colliderCells[i].x == newPosX && colliderCells[i].y == newPosY) {
                        console.log("collision!");
                        isTrue = false;
                    } 
                }
                return isTrue;
                //
                //if (colliderCells[i].x == newPosX) {
                //    canMoveX = false;
                //}
                //
                //if (colliderCells[i].y == newPosY) {
                //    canMoveY = false;
                //}
                //
                //if (canMoveY == false && canMoveX == false) {
                //    
                //}
                
            }
            
            // Check if you have collected an item
            function checkCollection() {
                
            }
            
    		// Move character    
    		switch (e.which) {
    			case 37: // left
    				e.preventDefault();
                    
                    // Check if cell is blocked
                    if ( checkMove("-x") ) {
                    
                        // Character movement
                        if (curPosX >= charSize) {
                            curPosX -= charSize;
                            $('#character').animate({
                                left: curPosX
                            }, animSpeed, function() {
                                // Animation complete.
                                checkHome();
                                checkCollection();
                            });
                        }
                        
                        // Window scroll
                        if (curPosX < ((window.innerWidth * currViewX) / 2)) {
                            $('html, body').animate({
                                "scrollLeft": ((-1 * (window.innerWidth) / 2))
                            }, 500);
                            currViewX -= 1;
                            //console.log(currViewX);
                        }
                    }
    				break;

    			case 38: // up
    				e.preventDefault();
                    
                    // Check if cell is blocked
                    if ( checkMove("-y") ) {
                        
                        // Character movement
                        if (curPosY >= charSize) {
                        curPosY -= charSize;
                        $('#character').animate({
                            top: curPosY
                        }, animSpeed, function() {
                            // Animation complete.
                            checkHome();
                            checkCollection();
                        });
                        }
                        
                        // Window scroll
                        if (curPosY < ((window.innerHeight * currViewY) / 2)) {
                            $('html, body').animate({
                                "scrollTop": ((-1 * (window.innerHeight * currViewY) / 2))
                            }, 500);
                            currViewY -= 1;
                            //console.log(currViewY);
                        }
                    }
    				break;

    			case 39: // right
    				//console.log(e);
                    e.preventDefault();
                    
                    // Check if cell is blocked
                    if ( checkMove("+x") ) {
                    
                        // Character movement
                        if (curPosX >= 0) {
                            curPosX += charSize;
                            $('#character').animate({
                                left: curPosX
                            }, animSpeed, function() {
                                // Animation complete.
                                checkHome();
                                checkCollection();
                            });
                        }
                        
                        // Window scroll
                        if (curPosX > ((window.innerWidth * currViewX) / 2)) {
                            $('html, body').animate({
                                "scrollLeft": ((window.innerWidth * currViewX) / 2)
                            }, 500);
                            currViewX += 1;
                            //console.log(currViewX);
                        }
                    
                    }
    				break;

    			case 40: // down
    				e.preventDefault();
                    
                    // Check if cell is blocked
                    if ( checkMove("+y") ) {
                    
                        // Character movement
                        if (curPosX >= 0) {
                        curPosY += charSize;
                        $('#character').animate({
                            top: curPosY
                        }, animSpeed, function() {
                            // Animation complete.
                            checkHome();
                            checkCollection();
                        });
                        }
    
                        // Window scroll
                        if (curPosY > ((window.innerHeight * currViewY) / 2)) {
                            $('html, body').animate({
                                "scrollTop": ((window.innerHeight * currViewY) / 2)
                            }, 500);
                            currViewY += 1;
                            //console.log(currViewY);
                        }
                    }
    				break;

    			default:
    				return; // exit this handler for other keys
    		}
    		e.preventDefault(); // prevent the default action (scroll / move caret)
    	});

    });

// Tasks - build courage
// picking flowers
// borrowing cup of sugar
// crossing street
// shoveling snow
// planting garden
// catching bugs
// chores



</script>
</html>


